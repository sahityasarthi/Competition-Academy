<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Video Library</title>

<style>
body { font-family: Arial; background:#f4f4f4; padding:20px; }
input, select { padding:10px; margin:5px; width:250px; }
.video { background:#fff; padding:15px; margin:15px 0; border-radius:8px; }
iframe { width:100%; max-width:560px; height:315px; }
h2 { margin:5px 0; }
</style>
</head>

<body>

<h1>ðŸ“º My Video Library</h1>

<input type="text" id="search" placeholder="ðŸ” Search title">
<select id="category">
  <option value="">All Categories</option>
</select>

<div id="videos"></div>

<script>
fetch("videos.csv")
.then(res => res.text())
.then(data => {
  const rows = data.split("\n");
  let categories = new Set();

  rows.forEach((row, index) => {
    if(index === 0) return;
    const [link, title, category] = row.split(",");

    if(link && link.includes("youtube")) {
      const id = link.split("v=")[1];
      categories.add(category);

      document.getElementById("videos").innerHTML += `
        <div class="video" data-title="${title}" data-category="${category}">
          <h2>${title}</h2>
          <p>Category: ${category}</p>
          <iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe>
        </div>`;
    }
  });

  categories.forEach(cat => {
    document.getElementById("category").innerHTML +=
      `<option value="${cat}">${cat}</option>`;
  });
});

// Search + Filter
document.addEventListener("input", () => {
  const text = search.value.toLowerCase();
  const cat = category.value;

  document.querySelectorAll(".video").forEach(v => {
    const matchText = v.dataset.title.toLowerCase().includes(text);
    const matchCat = !cat || v.dataset.category === cat;
    v.style.display = (matchText && matchCat) ? "block" : "none";
  });
});
</script>

</body>
</html>
